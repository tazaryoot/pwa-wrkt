(this["webpackJsonppwa-wrkt"]=this["webpackJsonppwa-wrkt"]||[]).push([[0],{33:function(e,t,a){e.exports=a(55)},38:function(e,t,a){},39:function(e,t,a){},44:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),l=a(10),i=a(1),s=a(11),u=(a(38),a(39),function(){return r.a.createElement("header",{className:"wrkt-header"},r.a.createElement(s.c,{exact:!0,activeClassName:"active-nav-link",to:"/"},"Goal List"),r.a.createElement(s.c,{activeClassName:"active-nav-link",to:"/goal"},"Goal"))}),d=(a(44),function(){return r.a.createElement("footer",null,"Footer")}),m=function(e){var t=e.children;return r.a.createElement("div",{className:"layout"},r.a.createElement(u,null),r.a.createElement("main",null,t),r.a.createElement(d,null))};m.defaultProps={children:null};var p=m,f=a(2),b=a.n(f),E=a(4),v=a(7),h=a(31),O=Object(n.createContext)({}),g=a(32);var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Object(g.a)(e)},j={isLoaded:!1,isLoading:!1,goalList:[],error:""},w=Object(n.createContext)({}),_=function(e,t){switch(t.type){case"FETCH_GOAL_LIST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,isLoaded:!1,error:""});case"FETCH_GOAL_LIST_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{goalList:t.payload,isLoading:!1,isLoaded:!0});case"ADD_GOAL":return Object(E.a)(Object(E.a)({},e),t.payload);case"FETCH_GOAL_LIST_ERROR":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,isLoaded:!1,error:t.error});case"CLEAR_GOAL_LIST":return Object(E.a)({},j);default:return Object(E.a)({},e)}},k=function(){var e=Object(h.a)(),t=e.register,a=e.handleSubmit,c=e.errors,o=e.reset,l=Object(n.useContext)(w).dispatch,i=L(),s=Object(n.useContext)(O),u=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(E.a)(Object(E.a)({},t),{},{code:i}),e.prev=1,e.next=4,s.addGoal(a);case 4:l({type:"CLEAR_GOAL_LIST"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(">>>>>> e:",e.t0);case 10:o();case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"add-goal"},r.a.createElement("form",{className:"add-goal-form",onSubmit:a(u)},r.a.createElement("div",{className:"add-goal-form__wrapper-field"},r.a.createElement("label",null,"Goal Title",r.a.createElement("input",{name:"title",ref:t({required:!0})})),c.title&&r.a.createElement("span",null,"Title is required")),r.a.createElement("div",{className:"add-goal-rom__wrapper-field"},r.a.createElement("label",null,"Goal description",r.a.createElement("input",{name:"desc",ref:t}))),r.a.createElement("button",{type:"submit"},"Add Goal")))},C=function(){var e=Object(i.f)().code;return r.a.createElement("section",null,e)},y=function(){var e=Object(n.useContext)(w),t=e.state,a=e.dispatch,c=Object(n.useContext)(O);return Object(n.useEffect)((function(){Object(v.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoaded){e.next=15;break}return a({type:"FETCH_GOAL_LIST"}),e.prev=2,e.next=5,c.getGoals();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=[];case 8:n=e.t0,a({type:"FETCH_GOAL_LIST_SUCCESS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t1=e.catch(2),a({type:"FETCH_GOAL_LIST_ERROR",error:e.t1.toString()});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))()}),[]),t.isLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"unstyled-list"},!!t.goalList.length&&t.goalList.map((function(e){var t=e.code,a=e.title;return r.a.createElement("li",{key:t},r.a.createElement(s.b,{to:"/goal/".concat(t)},a))})),!t.goalList.length&&r.a.createElement("div",null,"Goal list is empty")),r.a.createElement(s.b,{to:"/add-goal"},"Add goal")):null},S=a(29),G=a(30),x=a(14),A=(a(49),{apiKey:"AIzaSyAnK_lvAMC6u2jjEOZQvlCKoSSo_l1C8UY",authDomain:"pwa-wrkt.firebaseapp.com",databaseURL:"https://pwa-wrkt.firebaseio.com",projectId:"pwa-wrkt",storageBucket:"pwa-wrkt.appspot.com",messagingSenderId:"148975232824",appId:"1:148975232824:web:b2d30cb1142557c1f983cd",measurementId:"G-N3MWRZL4M7"}),T=function(){function e(){Object(S.a)(this,e),this.db=void 0,this.collectionName="goals",x.apps.length?x.app():x.initializeApp(A),this.db=x.firestore()}return Object(G.a)(e,[{key:"getGoals",value:function(){return this.db.collection(this.collectionName).orderBy("date","asc").get().then((function(e){if(e.empty)return null;var t=[];return e.forEach((function(e){t.push(e.data())})),t.map((function(e){var t=e.code,a=e.date,n=e.desc,r=e.title;return{date:a.toDate().toLocaleDateString(),code:t,title:r,desc:n}}))}))}},{key:"addGoal",value:function(e){var t=e.desc,a=void 0===t?"":t,n=e.title,r={desc:a,code:e.code,title:n,date:x.firestore.Timestamp.fromDate(new Date)};return this.db.collection(this.collectionName).doc().set(r)}}]),e}(),I=function(){var e=Object(n.useReducer)(_,j),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement(s.a,null,r.a.createElement(O.Provider,{value:new T},r.a.createElement(w.Provider,{value:{state:a,dispatch:c}},r.a.createElement(p,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:y}),r.a.createElement(i.a,{exact:!0,path:"/goal/:code",component:C}),r.a.createElement(i.a,{exact:!0,path:"/add-goal",component:k}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(54);o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.b412061f.chunk.js.map