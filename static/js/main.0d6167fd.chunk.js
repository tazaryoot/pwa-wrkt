(this["webpackJsonppwa-wrkt"]=this["webpackJsonppwa-wrkt"]||[]).push([[0],{33:function(e,t,a){e.exports=a(56)},38:function(e,t,a){},39:function(e,t,a){},44:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),l=a(10),i=a(2),s=a(11),u=(a(38),a(39),function(){return r.a.createElement("header",{className:"wrkt-header"},r.a.createElement(s.c,{exact:!0,activeClassName:"active-nav-link",to:"/"},"Goal List"),r.a.createElement(s.c,{activeClassName:"active-nav-link",to:"/goal"},"Goal"))}),d=(a(44),function(){return r.a.createElement("footer",null,"Footer")}),p=function(e){var t=e.children;return r.a.createElement("div",{className:"layout"},r.a.createElement(u,null),r.a.createElement("main",null,t),r.a.createElement(d,null))};p.defaultProps={children:null};var m=p,f=a(1),b=a.n(f),E=a(5),v=a(4),h=a(31),O=a(29),g=a(30),L=a(14),_=(a(49),{apiKey:"AIzaSyAnK_lvAMC6u2jjEOZQvlCKoSSo_l1C8UY",authDomain:"pwa-wrkt.firebaseapp.com",databaseURL:"https://pwa-wrkt.firebaseio.com",projectId:"pwa-wrkt",storageBucket:"pwa-wrkt.appspot.com",messagingSenderId:"148975232824",appId:"1:148975232824:web:b2d30cb1142557c1f983cd",measurementId:"G-N3MWRZL4M7"}),j=function(){function e(){Object(O.a)(this,e),this.db=void 0,this.collectionGoals="goals",L.apps.length?L.app():L.initializeApp(_),this.db=L.firestore()}return Object(g.a)(e,[{key:"getGoals",value:function(){return this.db.collection(this.collectionGoals).orderBy("date","asc").get().then((function(e){if(e.empty)return null;var t=[];return e.forEach((function(e){var a=e.data(),n=Object(E.a)(Object(E.a)({},a),{},{id:e.id});t.push(n)})),t.map((function(e){var t=e.code,a=e.date,n=e.desc,r=e.title,c=e.id;return{date:a.toDate().toLocaleDateString(),id:c,code:t,title:r,desc:n}}))}))}},{key:"addGoal",value:function(e){var t=e.desc,a=void 0===t?"":t,n=e.title,r={desc:a,code:e.code,title:n,date:L.firestore.Timestamp.fromDate(new Date)};return this.db.collection(this.collectionGoals).doc().set(r)}},{key:"deleteGoal",value:function(e){return this.db.collection(this.collectionGoals).doc(e).delete()}}]),e}(),w=Object(n.createContext)(new j),G=a(32);var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Object(G.a)(e)},x={isLoaded:!1,isLoading:!1,goalList:[],error:""},y=Object(n.createContext)({}),C=function(e,t){switch(t.type){case"FETCH_GOAL_LIST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,isLoaded:!1,error:""});case"FETCH_GOAL_LIST_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{goalList:t.payload,isLoading:!1,isLoaded:!0});case"ADD_GOAL":return Object(E.a)(Object(E.a)({},e),t.payload);case"FETCH_GOAL_LIST_ERROR":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,isLoaded:!1,error:t.error});case"DELETE_GOAL":case"CLEAR_GOAL_LIST":return Object(E.a)({},x);default:return Object(E.a)({},e)}},S=function(){var e=Object(h.a)(),t=e.register,a=e.handleSubmit,c=e.errors,o=e.reset,l=Object(n.useContext)(y).dispatch,i=k(),s=Object(n.useContext)(w),u=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(E.a)(Object(E.a)({},t),{},{code:i}),e.prev=1,e.next=4,s.addGoal(a);case 4:l({type:"CLEAR_GOAL_LIST"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(">>>>>> e:",e.t0);case 10:o();case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"add-goal"},r.a.createElement("form",{className:"add-goal-form",onSubmit:a(u)},r.a.createElement("div",{className:"add-goal-form__wrapper-field"},r.a.createElement("label",null,"Goal Title",r.a.createElement("input",{name:"title",ref:t({required:!0})})),c.title&&r.a.createElement("span",null,"Title is required")),r.a.createElement("div",{className:"add-goal-rom__wrapper-field"},r.a.createElement("label",null,"Goal description",r.a.createElement("input",{name:"desc",ref:t}))),r.a.createElement("button",{type:"submit"},"Add Goal")))};function A(e,t){return T.apply(this,arguments)}function T(){return(T=Object(v.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_GOAL_LIST"}),e.prev=1,e.next=4,a.getGoals();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return n=e.t0,t({type:"FETCH_GOAL_LIST_SUCCESS",payload:n}),e.abrupt("return",!0);case 12:return e.prev=12,e.t1=e.catch(1),t({type:"FETCH_GOAL_LIST_ERROR",error:e.t1.toString()}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}a(54);var N=function(){var e=Object(i.g)().code,t=Object(i.f)(),a=Object(n.useContext)(y),c=a.state,o=a.dispatch,l=Object(n.useContext)(w);if(Object(n.useEffect)((function(){Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.isLoaded){e.next=3;break}return e.next=3,A(o,l);case 3:case"end":return e.stop()}}),e)})))()}),[]),!c.isLoaded)return r.a.createElement("div",null,"Goal not found");var s=function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.deleteGoal(u.id);case 2:return o({type:"DELETE_GOAL"}),t.push(".."),e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=c.goalList.find((function(t){return t.code===e}))||[];return r.a.createElement("section",{className:"goal"},u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"goal__title"},u.title),r.a.createElement("div",{className:"goal__description"},u.desc),r.a.createElement("div",{className:"goal__buttons-wrapper"},r.a.createElement("button",{className:"goal__button goal__button_edit"},"Edit"),r.a.createElement("button",{className:"goal__button goal__button_delete",onClick:s},"Delete"))))},I=function(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch,c=Object(n.useContext)(w);return Object(n.useEffect)((function(){Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoaded){e.next=3;break}return e.next=3,A(a,c);case 3:case"end":return e.stop()}}),e)})))()}),[]),t.isLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"unstyled-list"},!!t.goalList.length&&t.goalList.map((function(e){var t=e.code,a=e.title;return r.a.createElement("li",{key:t},r.a.createElement(s.b,{to:"/goal/".concat(t)},a))})),!t.goalList.length&&r.a.createElement("div",null,"Goal list is empty")),r.a.createElement(s.b,{to:"/add-goal"},"Add goal")):null},R=function(){var e=Object(n.useReducer)(C,x),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement(s.a,null,r.a.createElement(y.Provider,{value:{state:a,dispatch:c}},r.a.createElement(m,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:I}),r.a.createElement(i.a,{exact:!0,path:"/goal/:code",component:N}),r.a.createElement(i.a,{exact:!0,path:"/add-goal",component:S})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(55);o.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.0d6167fd.chunk.js.map